<view class="chat-wrap">
  <view wx:if="{{orderId}}">
    <view class="chat-header">订单聊天</view>
    <view class="chat-sub">订单：{{order.id}}（{{order.status}}）</view>
    <scroll-view class="msgbox" scroll-y="true" scroll-into-view="{{lastId}}">
      <view id="top"></view>
      <view wx:for="{{messages}}" wx:key="id" id="{{item.id}}" class="row {{item.mine?'mine':'other'}}">
        <view class="bubble">{{item.content}}</view>
        <view class="time">{{item.created_at}}</view>
      </view>
    </scroll-view>
    <view class="chat-form">
      <input placeholder="输入消息" class="chat-input" bindinput="onInput" value="{{text}}" confirm-type="send" bindconfirm="send" />
      <button class="chat-send" bindtap="send">发送</button>
    </view>
  </view>
  <view wx:else>
    <view class="chat-header">聊天</view>
    <view class="chat-sub">请选择订单开始聊天</view>
    <button class="chat-send" bindtap="openOrders">前往订单列表</button>
  </view>
</view>