<view class="detail-page">
  <view class="img card">
    <image class="cover" src="{{imageSrc}}" mode="aspectFill"></image>
  </view>
  <view class="title">{{item.name}}<text class="subtitle">ï¼ˆèµ é€é¥®å“ä¸€ä»½ï¼‰</text></view>
  <view class="discount">5.4æŠ˜</view>
  <view class="price-row">
    <view class="price">Â¥{{priceDisplay}}/ä»½</view>
    <button class="spec-btn" bindtap="addToCart">é€‰è§„æ ¼</button>
    <button wx:if="{{adminMode}}" class="spec-btn" style="background:#7dcfb6" bindtap="toggleEdit">{{editing?"å–æ¶ˆ":"ç¼–è¾‘"}}</button>
  </view>

  <view class="section-title">èœå“ä»‹ç»</view>
  <view class="features">
    <view class="feat">
      <view class="feat-icon">ğŸ”¥</view>
      <view class="feat-main">{{calories}}å¡</view>
      <view class="feat-sub">çƒ­é‡</view>
    </view>
    <view class="feat">
      <view class="feat-icon">ğŸ½ï¸</view>
      <view class="feat-main">{{cookWay}}</view>
      <view class="feat-sub">çƒ¹é¥ªæ–¹å¼</view>
    </view>
    <view class="feat">
      <view class="feat-icon">ğŸ¥¬</view>
      <view class="feat-main">{{taste}}</view>
      <view class="feat-sub">{{item.category==='meat'?'è¤':'ç´ '}}</view>
    </view>
  </view>
  <view class="section-title">é£Ÿæ</view>
  <view class="ingredients">
    <view class="ing-item" wx:for="{{ingredientsList}}" wx:key="index">{{item}}</view>
  </view>

  <view class="section-title">åšæ³•æ­¥éª¤</view>
  <view class="steps">
    <view class="step" wx:for="{{methodSteps}}" wx:key="index">ç¬¬{{index+1}}æ­¥ï¼š{{item}}</view>
  </view>

  <view wx:if="{{editing}}" class="card edit-form">
    <input class="edit-input" placeholder="èœå" value="{{editName}}" bindinput="onEditName" />
    <view class="edit-row">
      <button class="btn {{editCategory==='meat'?'btn-primary':'btn-secondary'}}" data-v="meat" bindtap="onEditCategory">è¤</button>
      <button class="btn {{editCategory==='vegetable'?'btn-primary':'btn-secondary'}}" data-v="vegetable" bindtap="onEditCategory">ç´ </button>
    </view>
    <textarea class="edit-textarea" placeholder="é£Ÿæï¼ˆç”¨é¡¿å·åˆ†éš”ï¼‰" value="{{editIngredientsText}}" bindinput="onEditIngredients"></textarea>
    <textarea class="edit-textarea" placeholder="åšæ³•" value="{{editMethodText}}" bindinput="onEditMethod"></textarea>
    <button class="btn btn-primary" bindtap="saveEdit">ä¿å­˜</button>
  </view>

  <view class="cart-bar">
    <view class="cart-pill">
      <view class="cart-badge">{{cartCount}}</view>
      <text class="cart-total">Â¥ {{cartTotalDisplay}}</text>
    </view>
    <button class="checkout-btn" bindtap="goToOrder">å»ä¸‹å•</button>
  </view>
</view>
